# ðŸ”§ INSTRUCCIÃ“N IMPORTANTE: Actualizar GOOGLE_CALENDAR_ID en Railway

## âš ï¸ PROBLEMA ENCONTRADO

El servidor se cae al intentar agendar citas porque `GOOGLE_CALENDAR_ID=primary` NO funciona con Service Accounts.

## âœ… SOLUCIÃ“N

Actualiza la variable en Railway Dashboard:

1. Ve a Railway Dashboard > Tu proyecto > Variables
2. Busca `GOOGLE_CALENDAR_ID`  
3. Cambia el valor de `primary` a:

```
whatsapp-agent@gen-lang-client-0726897121.iam.gserviceaccount.com
```

4. Guarda y despliega

## ðŸ“Š PRUEBAS REALIZADAS

âœ… Google Sheets: FUNCIONANDO (se guardan registros correctamente)
âœ… Google Calendar: FUNCIONANDO (con el Calendar ID correcto)
âœ… Service Account: Permisos correctos

## ðŸŽ¯ CAMBIOS EN EL CÃ“DIGO

Ya corregidos y desplegados:
- âœ… Modelo Claude actualizado a `claude-3-5-haiku-20241022`
- âœ… Manejo de errores mejorado (no crashea si falla Calendar)
- âœ… Logs detallados para debugging
- âœ… Sheets tiene prioridad (mÃ¡s confiable)

## ðŸš€ DESPUÃ‰S DE ACTUALIZAR

El sistema funcionarÃ¡ asÃ­:
1. Usuario solicita agendar cita por WhatsApp
2. Claude recopila: nombre, telÃ©fono, fecha, hora, propiedad
3. Usuario confirma
4. Se guarda en Google Sheets âœ…
5. Se crea evento en Google Calendar âœ…
6. Usuario recibe confirmaciÃ³n por WhatsApp

Railway redesplegarÃ¡ automÃ¡ticamente al cambiar la variable.
